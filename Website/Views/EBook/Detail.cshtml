@using System.Globalization
@using Demo.EBook
@model Models.BookDetailViewModel

@{
    
    Layout = null;
    var epub = Model.Epub;
    var json = Model.Epub.ExtendedData;
    var c = 0;
}

<p>
    Book Title: @Model.Title    
</p>
<p>
    Authors: @Model.Author
</p>
<p>
    ISBN: @Model.Epub.ExtendedData
</p>
<br/>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
    @foreach (var toc in Model.Epub.TOC)
    {
        var id = toc.ID;
        <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingTwo">
                <h4 class="panel-title">
                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#toc-@id" aria-expanded="false" aria-controls="collapseTwo">
                        @toc.Title
                    </a>
                </h4>
            </div>
            <div id="toc-@id" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                <div class="panel-body">
                    @{
                        var words = NPLHelper.FindVocabularies(toc.ContentData.GetContentAsPlainText()).ToArray();
                    }
                    <ul>
                        <li>Word count: @words.Length</li>

                        @foreach (var word in words)
                        {
                            <li>@word.Word (@word.OccurrenceCount)</li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    }
    
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="headingTwo">
            <h4 class="panel-title">
                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#toc-all" aria-expanded="false" aria-controls="collapseTwo">
                    Vocabularies
                </a>
            </h4>
        </div>
        <div id="toc-all" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
            <div class="panel-body">
                @{
                    var allWords = NPLHelper.FindVocabularies(Model.Epub.GetContentAsPlainText()).ToArray();
                }
                <ul>
                    <li>Word count: @allWords.Length</li>

                    @foreach (var word in allWords)
                    {
                        <li>@word.Word (@word.OccurrenceCount)</li>
                    }
                </ul>
            </div>
        </div>
    </div>
</div>



@*<h2>All words</h2>
@{
    var allWords = NPLHelper.FindVocabularies(Model.Epub.GetContentAsPlainText()).ToArray();
}
<ul>
    <li>Total words: @allWords.Length</li>
    @foreach (var wor in  allWords)

    {
        <li>@wor.Word (@wor.OccurrenceCount)</li>
    }
</ul>*@


